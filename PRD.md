# AI-Petography.com äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

## ğŸ“‹ äº§å“æ¦‚è¿°

### æ ¸å¿ƒç›®æ ‡ (Mission)
æ‰“é€ å…¨çƒé¢†å…ˆçš„AIå® ç‰©ç…§ç‰‡ç”Ÿæˆå¹³å°ï¼Œè®©æ¯ä¸ªå® ç‰©ä¸»äººéƒ½èƒ½è½»æ¾åˆ›é€ å‡ºä¸“ä¸šçº§çš„å® ç‰©è‰ºæœ¯ä½œå“ï¼Œå¹¶é€šè¿‡ç¤¾åŒºåˆ†äº«ä¼ æ’­å¿«ä¹ã€‚

### ç”¨æˆ·ç”»åƒ (Persona)
**ä¸»è¦ç”¨æˆ·**ï¼šå® ç‰©ä¸»äººï¼ˆ25-45å²ï¼‰ï¼Œçƒ­çˆ±åˆ†äº«å® ç‰©ç”Ÿæ´»ï¼Œè¿½æ±‚ä¸ªæ€§åŒ–å’Œåˆ›æ„è¡¨è¾¾
**æ ¸å¿ƒç—›ç‚¹**ï¼š
- æƒ³ä¸ºå® ç‰©æ‹å‡ºä¸“ä¸šç…§ç‰‡ä½†ç¼ºä¹æŠ€èƒ½å’Œè®¾å¤‡
- å¸Œæœ›åˆ›é€ ç‹¬ç‰¹çš„å® ç‰©å½¢è±¡ä½†æˆæœ¬é«˜æ˜‚
- æ¸´æœ›åœ¨ç¤¾äº¤åª’ä½“ä¸Šåˆ†äº«æœ‰è¶£çš„å® ç‰©å†…å®¹

## ğŸš€ äº§å“è·¯çº¿å›¾

### V1: æœ€å°å¯è¡Œäº§å“ (MVP)
- âœ… **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ**ï¼ˆå¤ç”¨ç°æœ‰Supabaseè®¤è¯ï¼‰
- âœ… **ç§¯åˆ†ä»˜è´¹ç³»ç»Ÿ**ï¼ˆå¤ç”¨ç°æœ‰Creemæ”¯ä»˜ï¼‰
- âœ… **ä¸»é¢˜åˆ†ç±»æµè§ˆ**ï¼ˆ5ä¸ªæ ¸å¿ƒä¸»é¢˜ï¼šèŠ‚æ—¥ã€èŒä¸šã€å¥‡å¹»ã€æ—¶å°šã€è‰ºæœ¯ï¼‰
- âœ… **å‚è€ƒå›¾ç‰‡å±•ç¤º**ï¼ˆåŸºäºä½¿ç”¨æ¬¡æ•°æ’åºçš„ç€‘å¸ƒæµå¸ƒå±€ï¼‰
- âœ… **å® ç‰©ç…§ç‰‡ä¸Šä¼ **ï¼ˆæ‚¬æµ®ä¸Šä¼ æ¡†ï¼Œæ”¯æŒæ‹–æ‹½ï¼‰
- âœ… **AIå›¾ç‰‡ç”Ÿæˆ**ï¼ˆSeedream 4é›†æˆï¼Œæ”¯æŒæ™®é€š/2K/4Kè´¨é‡ï¼‰
- âœ… **ç”Ÿæˆç»“æœç®¡ç†**ï¼ˆå³ä¾§æ å±•ç¤ºï¼Œæ”¯æŒä¸‹è½½å’Œé‡æ–°ç”Ÿæˆï¼‰
- âœ… **åŸºç¡€åˆ†äº«åŠŸèƒ½**ï¼ˆä¸€é”®åˆ†äº«åˆ°ä¸»æµç¤¾äº¤å¹³å°ï¼‰
- âœ… **ç”¨æˆ·ä¸ªäººä¸»é¡µ**ï¼ˆå†å²ä½œå“å±•ç¤ºï¼‰

### V2 åŠä»¥åç‰ˆæœ¬ (Future Releases)
- **ç”¨æˆ·ç”Ÿæˆç”»å»Š**ï¼ˆç‹¬ç«‹tabå±•ç¤ºæ‰€æœ‰ç”¨æˆ·ä½œå“ï¼‰
- ğŸ”„ **å¤šå‚è€ƒå›¾æ‰¹é‡ç”Ÿæˆ**
- **å†…å®¹å®¡æ ¸**ï¼šç”¨æˆ·ç”Ÿæˆçš„å›¾ç‰‡éœ€é€šè¿‡åŸºç¡€AIå®¡æ ¸æ‰èƒ½å‘å¸ƒåˆ°å…¬å…±ç”»å»Š
- ğŸ’¬ **ç¤¾äº¤äº’åŠ¨åŠŸèƒ½**ï¼ˆç‚¹èµã€è¯„è®ºã€æ”¶è—ï¼‰
- ğŸ¨ **åˆ›ä½œè€…æ¨¡å¼**ï¼ˆç”¨æˆ·ä¸Šä¼ æ¨¡æ¿å’Œæç¤ºè¯ï¼‰
- ğŸŒ **å¤šè¯­è¨€æ”¯æŒ**
- ğŸ“± **ç§»åŠ¨ç«¯APP**

## ğŸ“Š å…³é”®ä¸šåŠ¡é€»è¾‘

### ç§¯åˆ†æ¶ˆè´¹è§„åˆ™
- æ™®é€šè´¨é‡ï¼š100ç§¯åˆ†
- 2Kè´¨é‡ï¼š300ç§¯åˆ†
- 4Kè´¨é‡ï¼š500ç§¯åˆ†

### ä¸»é¢˜ç®¡ç†
- ç®¡ç†å‘˜å¯åŠ¨æ€æ·»åŠ æ–°ä¸»é¢˜ï¼Œæ¯ä¸ªä¸»é¢˜åŒ…å«å¤šä¸ªå‚è€ƒå›¾ç‰‡
- ä¸»é¢˜æ”¯æŒæ’åºå’Œå¯ç”¨/ç¦ç”¨çŠ¶æ€

### ä½¿ç”¨æ¬¡æ•°ç»Ÿè®¡
- æ¯æ¬¡ç”¨æˆ·é€‰æ‹©å‚è€ƒå›¾ç”Ÿæˆæ—¶ï¼Œè¯¥å›¾ç‰‡ä½¿ç”¨æ¬¡æ•°+1
- åŸºäºä½¿ç”¨æ¬¡æ•°è¿›è¡Œçƒ­é—¨æ’åº

### ç”Ÿæˆé™åˆ¶
- å•æ¬¡ä¸Šä¼ æœ€å¤š3å¼ å® ç‰©ç…§ç‰‡
- å•æ¬¡ç”Ÿæˆæœ€å¤šé€‰æ‹©1ä¸ªå‚è€ƒå›¾ï¼ˆMVPé˜¶æ®µï¼‰

## ğŸ—„ï¸ æ•°æ®å¥‘çº¦

### æ ¸å¿ƒæ•°æ®è¡¨ç»“æ„
```sql
-- ä¸»é¢˜åˆ†ç±»è¡¨
themes (
    id uuid primary key,
    name text not null,
    description text,
    sort_order integer default 0,
    is_active boolean default true,
    created_at timestamp with time zone default now()
);

-- å‚è€ƒå›¾ç‰‡æ¨¡æ¿è¡¨  
reference_images (
    id uuid primary key,
    theme_id uuid references themes(id),
    image_url text not null,
    prompt_text text not null,
    usage_count integer default 0,
    is_featured boolean default false,
    created_at timestamp with time zone default now()
);

-- å® ç‰©å›¾ç‰‡ç”Ÿæˆè®°å½•è¡¨
pet_generations (
    id uuid primary key,
    user_id uuid references auth.users(id),
    reference_image_id uuid references reference_images(id),
    pet_image_urls text[] not null,
    generated_image_url text,
    quality_level text check (quality_level in ('normal', '2k', '4k')),
    credits_used integer not null,
    generation_status text default 'pending',
    is_public boolean default false,
    metadata jsonb default '{}',
    created_at timestamp with time zone default now()
);
```

## ğŸ¨ UI/UX è®¾è®¡æ–¹æ¡ˆ

### é€‰å®šæ–¹æ¡ˆï¼šç»å…¸ç€‘å¸ƒæµå¸ƒå±€
- **ä¸»åŒºåŸŸ**ï¼šç€‘å¸ƒæµå±•ç¤ºå‚è€ƒå›¾ç‰‡ï¼Œæ”¯æŒä¸»é¢˜ç­›é€‰
- **å³ä¾§æ **ï¼šå½“å‰ç”Ÿæˆç»“æœå¤§å›¾å±•ç¤º + å†å²ç”Ÿæˆå°å›¾æ»‘åŠ¨æµè§ˆ
- **åº•éƒ¨æ‚¬æµ®**ï¼šæ™ºèƒ½ä¸Šä¼ åŒºåŸŸï¼Œæ”¯æŒæ‹–æ‹½ä¸Šä¼ å’Œè´¨é‡é€‰æ‹©

### å…³é”®äº¤äº’è®¾è®¡
1. **å›¾ç‰‡é€‰æ‹©**ï¼šç‚¹å‡»å‚è€ƒå›¾ç‰‡é«˜äº®é€‰ä¸­ï¼Œæ˜¾ç¤ºä½¿ç”¨æ¬¡æ•°
2. **ä¸Šä¼ é¢„è§ˆ**ï¼šæ”¯æŒæ‹–æ‹½ä¸Šä¼ ï¼Œå®æ—¶é¢„è§ˆå® ç‰©ç…§ç‰‡
3. **ç”Ÿæˆè¿›åº¦**ï¼š10ç§’ç”Ÿæˆè¿‡ç¨‹æ˜¾ç¤ºè¿›åº¦æ¡å’Œé¢„è®¡æ—¶é—´
4. **ç»“æœå±•ç¤º**ï¼šå¤§å›¾å±•ç¤ºå½“å‰ç»“æœï¼Œå°å›¾æ»‘åŠ¨æµè§ˆå†å²
5. **ä¸€é”®æ“ä½œ**ï¼šä¸‹è½½ã€é‡æ–°ç”Ÿæˆã€åˆ†äº«ç­‰å¿«æ·æ“ä½œ

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæµç¨‹å›¾

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant F as å‰ç«¯ç•Œé¢
    participant A as APIæœåŠ¡
    participant DB as Supabaseæ•°æ®åº“
    participant S4 as Seedream 4 API
    participant CS as ç§¯åˆ†ç³»ç»Ÿ

    U->>F: 1. æµè§ˆå‚è€ƒå›¾ç‰‡
    F->>A: è·å–ä¸»é¢˜åˆ†ç±»å’Œå‚è€ƒå›¾
    A->>DB: æŸ¥è¯¢themeså’Œreference_images
    DB-->>A: è¿”å›å›¾ç‰‡æ•°æ®
    A-->>F: è¿”å›åˆ†ç±»å’Œå›¾ç‰‡åˆ—è¡¨
    F-->>U: å±•ç¤ºç€‘å¸ƒæµå¸ƒå±€

    U->>F: 2. ä¸Šä¼ å® ç‰©ç…§ç‰‡
    F->>F: æœ¬åœ°é¢„è§ˆå’ŒéªŒè¯
    F->>A: ä¸Šä¼ å›¾ç‰‡åˆ°å­˜å‚¨
    A-->>F: è¿”å›å›¾ç‰‡URL

    U->>F: 3. é€‰æ‹©å‚è€ƒå›¾å’Œè´¨é‡
    F->>F: æ›´æ–°UIçŠ¶æ€

    U->>F: 4. ç‚¹å‡»ç”ŸæˆæŒ‰é’®
    F->>A: å‘èµ·ç”Ÿæˆè¯·æ±‚
    A->>CS: æ£€æŸ¥ç”¨æˆ·ç§¯åˆ†
    CS-->>A: ç§¯åˆ†éªŒè¯ç»“æœ

    alt ç§¯åˆ†å……è¶³
        A->>DB: è®°å½•ç”Ÿæˆæ—¥å¿—
        A->>S4: è°ƒç”¨AIç”ŸæˆAPI
        Note over S4: å¤„ç†æ—¶é—´çº¦10ç§’
        S4-->>A: è¿”å›ç”Ÿæˆçš„å›¾ç‰‡
        A->>DB: ä¿å­˜ç”Ÿæˆç»“æœ
        A->>CS: æ‰£é™¤ç§¯åˆ†
        A-->>F: è¿”å›ç”Ÿæˆç»“æœ
        F-->>U: å±•ç¤ºç”Ÿæˆçš„å›¾ç‰‡
    else ç§¯åˆ†ä¸è¶³
        A-->>F: è¿”å›ç§¯åˆ†ä¸è¶³é”™è¯¯
        F-->>U: æç¤ºå……å€¼
    end

    U->>F: 5. ä¸‹è½½æˆ–åˆ†äº«
    F->>A: è®°å½•ä½¿ç”¨ç»Ÿè®¡
    A->>DB: æ›´æ–°usage_count
```

### ç»„ä»¶äº¤äº’æ¶æ„å›¾

```mermaid
flowchart TD
    A[ç”¨æˆ·ç•Œé¢å±‚] --> B[ä¸šåŠ¡é€»è¾‘å±‚]
    B --> C[æ•°æ®è®¿é—®å±‚]
    C --> D[å¤–éƒ¨æœåŠ¡å±‚]

    subgraph "å‰ç«¯ç»„ä»¶ (å¤ç”¨ç°æœ‰æ¶æ„)"
        A1[ä¸»é¡µç€‘å¸ƒæµç»„ä»¶]
        A2[å›¾ç‰‡ä¸Šä¼ ç»„ä»¶]
        A3[ç”Ÿæˆç»“æœç»„ä»¶]
        A4[ä¸ªäººä¸»é¡µç»„ä»¶]
        A5[ä¸»é¢˜åˆ†ç±»ç»„ä»¶]
    end

    subgraph "APIè·¯ç”± (æ–°å¢)"
        B1[/api/pet-images/generate]
        B2[/api/themes]
        B3[/api/reference-images]
        B4[/api/user-generations]
        B5[/api/upload]
    end

    subgraph "æ•°æ®åº“è¡¨ (æ–°å¢)"
        C1[themes]
        C2[reference_images]
        C3[pet_generations]
        C4[user_uploads]
    end

    subgraph "ç°æœ‰ç³»ç»Ÿ (å¤ç”¨)"
        C5[customers - ç§¯åˆ†ç³»ç»Ÿ]
        C6[auth.users - ç”¨æˆ·è®¤è¯]
    end

    subgraph "å¤–éƒ¨æœåŠ¡"
        D1[Seedream 4 API]
        D2[Supabase Storage]
        D3[Creem æ”¯ä»˜ç³»ç»Ÿ]
    end

    A1 --> B2
    A1 --> B3
    A2 --> B5
    A3 --> B1
    A4 --> B4

    B1 --> C3
    B1 --> D1
    B2 --> C1
    B3 --> C2
    B4 --> C3
    B5 --> D2

    B1 --> C5
    B4 --> C6
```

### ç»„ä»¶äº¤äº’è¯´æ˜

#### æ–°å¢æ¨¡å—ä¸ç°æœ‰æ¨¡å—çš„å…³ç³»

1. **å¤ç”¨ç°æœ‰è®¤è¯ç³»ç»Ÿ**
   - ç›´æ¥ä½¿ç”¨ `auth.users` è¡¨å’Œç°æœ‰çš„è®¤è¯ä¸­é—´ä»¶
   - å¤ç”¨ `Header` ç»„ä»¶çš„ç”¨æˆ·çŠ¶æ€ç®¡ç†

2. **å¤ç”¨ç°æœ‰ç§¯åˆ†ç³»ç»Ÿ**
   - ä½¿ç”¨ç°æœ‰çš„ `customers` è¡¨å’Œç§¯åˆ†å­—æ®µ
   - å¤ç”¨ `use-credits.ts` å’Œ `use-subscription.ts` hooks
   - é›†æˆç°æœ‰çš„ Creem æ”¯ä»˜æµç¨‹

3. **æ–°å¢æ ¸å¿ƒåŠŸèƒ½æ¨¡å—**
   - `components/pet-generator/` - å® ç‰©ç…§ç‰‡ç”Ÿæˆç›¸å…³ç»„ä»¶
   - `app/pet-generator/` - æ–°çš„é¡µé¢è·¯ç”±
   - `app/api/pet-images/` - æ–°çš„APIè·¯ç”±

#### æ–‡ä»¶ç»“æ„æ‰©å±•
```
app/
â”œâ”€â”€ pet-generator/           # æ–°å¢ï¼šå® ç‰©ç…§ç‰‡ç”Ÿæˆä¸»é¡µ
â”‚   â”œâ”€â”€ page.tsx
â”‚   â””â”€â”€ layout.tsx
â”œâ”€â”€ profile/                 # æ‰©å±•ï¼šç”¨æˆ·ä¸ªäººä¸»é¡µ
â”‚   â”œâ”€â”€ page.tsx            # ä¿®æ”¹ï¼šæ·»åŠ å® ç‰©ä½œå“å±•ç¤º
â”‚   â””â”€â”€ pet-gallery/        # æ–°å¢ï¼šä¸ªäººå® ç‰©ä½œå“é¡µ
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ pet-images/         # æ–°å¢ï¼šå® ç‰©å›¾ç‰‡ç›¸å…³API
â”‚   â”‚   â”œâ”€â”€ generate/
â”‚   â”‚   â”œâ”€â”€ upload/
â”‚   â”‚   â””â”€â”€ user-gallery/
â”‚   â””â”€â”€ themes/             # æ–°å¢ï¼šä¸»é¢˜ç®¡ç†API

components/
â”œâ”€â”€ pet-generator/          # æ–°å¢ï¼šå® ç‰©ç”Ÿæˆå™¨ç»„ä»¶
â”‚   â”œâ”€â”€ theme-gallery.tsx   # ä¸»é¢˜ç€‘å¸ƒæµ
â”‚   â”œâ”€â”€ upload-zone.tsx     # ä¸Šä¼ åŒºåŸŸ
â”‚   â”œâ”€â”€ result-panel.tsx    # ç»“æœå±•ç¤ºé¢æ¿
â”‚   â””â”€â”€ quality-selector.tsx
â””â”€â”€ profile/
    â””â”€â”€ pet-works.tsx       # æ–°å¢ï¼šä¸ªäººä½œå“å±•ç¤ºç»„ä»¶
```

### æŠ€æœ¯é€‰å‹ä¸é£é™©è¯„ä¼°

#### å…³é”®æŠ€æœ¯é€‰å‹

1. **å›¾ç‰‡å¤„ç†**
   - **é€‰æ‹©**: ä½¿ç”¨ Next.js Image ç»„ä»¶ + Supabase Storage
   - **ç†ç”±**: ä¸ç°æœ‰æ¶æ„ä¸€è‡´ï¼Œæ”¯æŒè‡ªåŠ¨ä¼˜åŒ–å’ŒCDNåŠ é€Ÿ

2. **AIå›¾ç‰‡ç”Ÿæˆ**
   - **é€‰æ‹©**: Seedream 4 API
   - **é›†æˆæ–¹å¼**: ç±»ä¼¼ç°æœ‰çš„ OpenAI API è°ƒç”¨æ¨¡å¼

3. **çŠ¶æ€ç®¡ç†**
   - **é€‰æ‹©**: React useState + useContext (ä¸ç°æœ‰é¡¹ç›®ä¸€è‡´)
   - **ç†ç”±**: ä¿æŒæŠ€æœ¯æ ˆç»Ÿä¸€ï¼Œé™ä½å¤æ‚åº¦

4. **å›¾ç‰‡ä¸Šä¼ **
   - **é€‰æ‹©**: ç›´æ¥ä¸Šä¼ åˆ° Supabase Storage
   - **ä¼˜åŒ–**: å®¢æˆ·ç«¯å‹ç¼© + è¿›åº¦æ˜¾ç¤º

#### æ½œåœ¨æŠ€æœ¯é£é™©

1. **AIç”Ÿæˆå»¶è¿Ÿé£é™©**
   - **é£é™©**: 10ç§’ç”Ÿæˆæ—¶é—´å¯èƒ½å¯¼è‡´ç”¨æˆ·æµå¤±
   - **ç¼“è§£**: å®ç°WebSocketå®æ—¶è¿›åº¦æ¨é€ï¼Œæ·»åŠ æœ‰è¶£çš„ç­‰å¾…åŠ¨ç”»

2. **å›¾ç‰‡å­˜å‚¨æˆæœ¬**
   - **é£é™©**: å¤§é‡é«˜è´¨é‡å›¾ç‰‡å­˜å‚¨æˆæœ¬é«˜
   - **ç¼“è§£**: å®ç°å›¾ç‰‡å‹ç¼©ç­–ç•¥ï¼Œè®¾ç½®å­˜å‚¨æœŸé™

3. **å¹¶å‘ç”Ÿæˆé™åˆ¶**
   - **é£é™©**: Seedream 4 APIå¯èƒ½æœ‰å¹¶å‘é™åˆ¶
   - **ç¼“è§£**: å®ç°é˜Ÿåˆ—ç³»ç»Ÿï¼Œæ˜¾ç¤ºæ’é˜ŸçŠ¶æ€

4. **ç§¯åˆ†ç³»ç»Ÿå…¼å®¹æ€§**
   - **é£é™©**: æ–°çš„ç§¯åˆ†æ¶ˆè´¹è§„åˆ™å¯èƒ½ä¸ç°æœ‰ç³»ç»Ÿå†²çª
   - **ç¼“è§£**: æ‰©å±•ç°æœ‰ç§¯åˆ†ç³»ç»Ÿï¼Œä¿æŒå‘åå…¼å®¹

### æŠ€æœ¯æ ˆé€‰æ‹©
- **å‰ç«¯**ï¼šNext.js 14 + React 19 + TypeScript
- **åç«¯**ï¼šNext.js API Routes
- **æ•°æ®åº“**ï¼šSupabase PostgreSQL
- **è®¤è¯**ï¼šSupabase Auth
- **æ”¯ä»˜**ï¼šCreem.io
- **AIæœåŠ¡**ï¼šSeedream 4 API
- **å­˜å‚¨**ï¼šSupabase Storage
- **æ ·å¼**ï¼šTailwind CSS + shadcn/ui

### æ ¸å¿ƒAPIè®¾è®¡
```typescript
// ç”Ÿæˆå® ç‰©ç…§ç‰‡
POST /api/pet-images/generate
{
  referenceImageId: string,
  petImageUrls: string[],
  qualityLevel: 'normal' | '2k' | '4k'
}

// è·å–ä¸»é¢˜åˆ—è¡¨
GET /api/themes

// è·å–å‚è€ƒå›¾ç‰‡
GET /api/reference-images?themeId=xxx&page=1&limit=20

// ç”¨æˆ·ç”Ÿæˆå†å²
GET /api/user-generations?userId=xxx&page=1&limit=10
```

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

### MVPé˜¶æ®µå…³é”®æŒ‡æ ‡
- **ç”¨æˆ·æ³¨å†Œè½¬åŒ–ç‡** > 15%
- **é¦–æ¬¡ç”Ÿæˆå®Œæˆç‡** > 80%
- **ç”¨æˆ·ç•™å­˜ç‡**ï¼ˆ7å¤©ï¼‰> 25%
- **å¹³å‡æ¯ç”¨æˆ·ç”Ÿæˆæ¬¡æ•°** > 3æ¬¡
- **ç§¯åˆ†è´­ä¹°è½¬åŒ–ç‡** > 10%

### äº§å“å¢é•¿æŒ‡æ ‡
- **æœˆæ´»è·ƒç”¨æˆ·æ•°** (MAU)
- **ç”¨æˆ·ç”Ÿæˆå†…å®¹æ•°é‡** (UGC)
- **ç¤¾äº¤åˆ†äº«æ¬¡æ•°**
- **å¹³å‡ä¼šè¯æ—¶é•¿**

## ğŸ“… å¼€å‘è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½å¼€å‘ï¼ˆ4-6å‘¨ï¼‰
1. æ•°æ®åº“è®¾è®¡ä¸è¿ç§»
2. æ ¸å¿ƒAPIæ¥å£å¼€å‘
3. å‰ç«¯ç»„ä»¶å¼€å‘
4. Seedream 4 APIé›†æˆ

### ç¬¬äºŒé˜¶æ®µï¼šç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼ˆ2-3å‘¨ï¼‰
1. å›¾ç‰‡é¢„è§ˆå’Œæ‹–æ‹½ä¸Šä¼ 
2. ç”Ÿæˆè¿›åº¦æ˜¾ç¤º
3. ç»“æœå±•ç¤ºä¼˜åŒ–
4. ä¸ªäººä¸»é¡µå¼€å‘

### ç¬¬ä¸‰é˜¶æ®µï¼šæµ‹è¯•ä¸éƒ¨ç½²ï¼ˆ1-2å‘¨ï¼‰
1. åŠŸèƒ½æµ‹è¯•
2. æ€§èƒ½ä¼˜åŒ–
3. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
4. ç”¨æˆ·åé¦ˆæ”¶é›†

## ğŸ”’ é£é™©è¯„ä¼°

### æŠ€æœ¯é£é™©
- **AIç”Ÿæˆå»¶è¿Ÿ**ï¼š10ç§’ç­‰å¾…æ—¶é—´éœ€è¦è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒè®¾è®¡
- **å¹¶å‘é™åˆ¶**ï¼šéœ€è¦å®ç°é˜Ÿåˆ—ç³»ç»Ÿå¤„ç†é«˜å¹¶å‘è¯·æ±‚
- **å­˜å‚¨æˆæœ¬**ï¼šå¤§é‡å›¾ç‰‡å­˜å‚¨éœ€è¦æˆæœ¬æ§åˆ¶ç­–ç•¥

### ä¸šåŠ¡é£é™©
- **ç”¨æˆ·è·å–æˆæœ¬**ï¼šéœ€è¦æœ‰æ•ˆçš„è¥é”€ç­–ç•¥
- **å†…å®¹è´¨é‡**ï¼šAIç”Ÿæˆè´¨é‡ç›´æ¥å½±å“ç”¨æˆ·æ»¡æ„åº¦
- **ç«äº‰å‹åŠ›**ï¼šå¸‚åœºä¸Šå¯èƒ½å‡ºç°ç±»ä¼¼äº§å“

## ğŸ”§ æ¡†æ¶ä¿®æ”¹æ–¹æ¡ˆ

### ç°çŠ¶åˆ†æ
å½“å‰ä»£ç åº“æ˜¯ä¸€ä¸ªåŸºäºNext.js + Supabase + Creemçš„ä¸­æ–‡åå­—ç”Ÿæˆå™¨é¡¹ç›®ï¼ŒåŒ…å«å®Œæ•´çš„ç”¨æˆ·è®¤è¯ã€æ”¯ä»˜ã€ç§¯åˆ†ç³»ç»Ÿç­‰æ¡†æ¶åŠŸèƒ½ã€‚ä¸ºäº†è½¬æ¢ä¸ºAIå® ç‰©ç…§ç‰‡ç”Ÿæˆå¹³å°ï¼Œéœ€è¦ä¿ç•™æ¡†æ¶æ ¸å¿ƒåŠŸèƒ½ï¼Œç§»é™¤ä¸šåŠ¡ç‰¹å®šä»£ç ã€‚

### ä¿ç•™çš„æ¡†æ¶åŸºç¡€åŠŸèƒ½

#### 1. æ ¸å¿ƒåŸºç¡€è®¾æ–½ âœ… ä¿ç•™
```
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx              # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ globals.css             # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ (auth-pages)/           # è®¤è¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ sign-in/
â”‚   â”‚   â”œâ”€â”€ sign-up/
â”‚   â”‚   â””â”€â”€ forgot-password/
â”‚   â”œâ”€â”€ auth/callback/          # OAuthå›è°ƒ
â”‚   â”œâ”€â”€ dashboard/              # ç”¨æˆ·ä»ªè¡¨æ¿
â”‚   â””â”€â”€ profile/                # ç”¨æˆ·ä¸ªäººèµ„æ–™
â”œâ”€â”€ middleware.ts               # è·¯ç”±ä¿æŠ¤ä¸­é—´ä»¶
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                     # shadcn/uiç»„ä»¶åº“
â”‚   â”œâ”€â”€ header.tsx              # å¯¼èˆªå¤´éƒ¨
â”‚   â”œâ”€â”€ footer.tsx              # é¡µè„š
â”‚   â”œâ”€â”€ theme-switcher.tsx      # ä¸»é¢˜åˆ‡æ¢
â”‚   â””â”€â”€ mobile-nav.tsx          # ç§»åŠ¨ç«¯å¯¼èˆª
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ use-user.ts             # ç”¨æˆ·çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ use-credits.ts          # ç§¯åˆ†ç®¡ç†
â”‚   â”œâ”€â”€ use-subscription.ts     # è®¢é˜…ç®¡ç†
â”‚   â””â”€â”€ use-toast.ts            # é€šçŸ¥æç¤º
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ supabase/               # Supabaseå®¢æˆ·ç«¯é…ç½®
â”‚   â””â”€â”€ creem/                  # Creemæ”¯ä»˜å·¥å…·
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ creem.ts                # Creemç±»å‹å®šä¹‰
â”‚   â””â”€â”€ subscriptions.ts        # è®¢é˜…ç±»å‹å®šä¹‰
```

#### 2. æ•°æ®åº“åŸºç¡€è¡¨ âœ… ä¿ç•™
```sql
-- ç”¨æˆ·è®¤è¯ï¼ˆSupabaseå†…ç½®ï¼‰
auth.users

-- å®¢æˆ·ä¿¡æ¯å’Œç§¯åˆ†ç³»ç»Ÿ
customers (
    id, user_id, creem_customer_id,
    email, name, country, credits,
    created_at, updated_at, metadata
)

-- è®¢é˜…ç®¡ç†
subscriptions (
    id, customer_id, status,
    current_period_start, current_period_end,
    creem_product_id, creem_subscription_id
)

-- ç§¯åˆ†å†å²
credits_history (
    id, customer_id, amount, type,
    description, metadata, created_at
)
```

#### 3. APIåŸºç¡€åŠŸèƒ½ âœ… ä¿ç•™
```
â”œâ”€â”€ app/api/
â”‚   â”œâ”€â”€ credits/                # ç§¯åˆ†ç®¡ç†API
â”‚   â”œâ”€â”€ webhooks/creem/         # Creemæ”¯ä»˜å›è°ƒ
â”‚   â””â”€â”€ auth/                   # è®¤è¯ç›¸å…³API
```

### éœ€è¦ç§»é™¤çš„ä¸šåŠ¡ç‰¹å®šåŠŸèƒ½

#### 1. ä¸­æ–‡åå­—ç”Ÿæˆå™¨ç›¸å…³ âŒ åˆ é™¤
```
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ page.tsx                # å½“å‰ä¸»é¡µï¼ˆåå­—ç”Ÿæˆå™¨ï¼‰
â”‚   â”œâ”€â”€ name-detail/            # åå­—è¯¦æƒ…é¡µ
â”‚   â”œâ”€â”€ results/                # ç”Ÿæˆç»“æœé¡µ
â”‚   â”œâ”€â”€ product/                # äº§å“ç›¸å…³é¡µé¢
â”‚   â”œâ”€â”€ about/                  # å…³äºé¡µé¢
â”‚   â”œâ”€â”€ privacy/                # éšç§æ”¿ç­–
â”‚   â””â”€â”€ terms/                  # æœåŠ¡æ¡æ¬¾
â”œâ”€â”€ app/api/
â”‚   â”œâ”€â”€ chinese-names/          # ä¸­æ–‡åå­—ç”ŸæˆAPI
â”‚   â”œâ”€â”€ saved-names/            # ä¿å­˜åå­—API
â”‚   â”œâ”€â”€ popular-names/          # çƒ­é—¨åå­—API
â”‚   â””â”€â”€ generate-pdf/           # PDFç”ŸæˆAPI
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ product/                # äº§å“ç›¸å…³ç»„ä»¶
â”‚   â””â”€â”€ dashboard/              # ä»ªè¡¨æ¿ç»„ä»¶ï¼ˆåå­—ç›¸å…³ï¼‰
```

#### 2. ä¸­æ–‡åå­—ç›¸å…³æ•°æ®åº“è¡¨ âŒ åˆ é™¤
```sql
-- åˆ é™¤ä»¥ä¸‹è¿ç§»æ–‡ä»¶å’Œç›¸å…³è¡¨
supabase/migrations/20241229000000_chinese_names_tables.sql
supabase/migrations/20241231000000_generation_batches.sql

-- åˆ é™¤çš„è¡¨ï¼š
name_generation_logs
saved_names
popular_names
generation_batches
generated_names
```

#### 3. ä¸šåŠ¡ç‰¹å®šä¾èµ– âŒ åˆ é™¤
```json
// package.json ä¸­å¯ä»¥ç§»é™¤çš„ä¾èµ–
{
  "puppeteer": "^24.15.0",  // PDFç”Ÿæˆç›¸å…³
  "openai": "^5.10.2"       // å¦‚æœåªç”¨äºä¸­æ–‡åå­—ç”Ÿæˆ
}
```

### ä¿®æ”¹å®æ–½è®¡åˆ’

#### é˜¶æ®µ1ï¼šæ¸…ç†ä¸šåŠ¡ä»£ç ï¼ˆ1-2å¤©ï¼‰
1. **åˆ é™¤é¡µé¢å’Œç»„ä»¶**
   - åˆ é™¤ `app/page.tsx`ï¼ˆå½“å‰åå­—ç”Ÿæˆå™¨ä¸»é¡µï¼‰
   - åˆ é™¤ `app/name-detail/`, `app/results/`, `app/product/`
   - åˆ é™¤ `components/product/` ç›®å½•
   - åˆ é™¤ç›¸å…³çš„ä»ªè¡¨æ¿ç»„ä»¶

2. **åˆ é™¤APIè·¯ç”±**
   - åˆ é™¤ `app/api/chinese-names/`
   - åˆ é™¤ `app/api/saved-names/`
   - åˆ é™¤ `app/api/popular-names/`
   - åˆ é™¤ `app/api/generate-pdf/`

3. **æ¸…ç†æ•°æ®åº“**
   - åˆ é™¤ä¸­æ–‡åå­—ç›¸å…³çš„è¿ç§»æ–‡ä»¶
   - åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è°¨æ…åˆ é™¤ç›¸å…³è¡¨

#### é˜¶æ®µ2ï¼šæ›´æ–°æ¡†æ¶é…ç½®ï¼ˆ1å¤©ï¼‰
1. **æ›´æ–°å¯¼èˆªå’Œè·¯ç”±**
   - ä¿®æ”¹ `components/header.tsx` ç§»é™¤åå­—ç”Ÿæˆå™¨ç›¸å…³å¯¼èˆª
   - æ›´æ–° `middleware.ts` è·¯ç”±ä¿æŠ¤è§„åˆ™
   - åˆ›å»ºæ–°çš„ä¸»é¡µ `app/page.tsx`

2. **æ›´æ–°ç¯å¢ƒå˜é‡**
   - ç§»é™¤ `OPENROUTER_API_KEY` ç­‰åå­—ç”Ÿæˆç›¸å…³é…ç½®
   - æ·»åŠ  Seedream 4 API ç›¸å…³é…ç½®

3. **æ›´æ–°æ–‡æ¡£**
   - ä¿®æ”¹ `README.md` ç§»é™¤ä¸­æ–‡åå­—ç”Ÿæˆå™¨æè¿°
   - æ›´æ–°é¡¹ç›®ä»‹ç»ä¸ºAIå® ç‰©ç…§ç‰‡ç”Ÿæˆå¹³å°

#### é˜¶æ®µ3ï¼šéªŒè¯æ¡†æ¶å®Œæ•´æ€§ï¼ˆ1å¤©ï¼‰
1. **åŠŸèƒ½éªŒè¯**
   - ç”¨æˆ·æ³¨å†Œ/ç™»å½•æµç¨‹
   - ç§¯åˆ†ç³»ç»Ÿæ­£å¸¸å·¥ä½œ
   - æ”¯ä»˜æµç¨‹å®Œæ•´
   - ä»ªè¡¨æ¿åŸºç¡€åŠŸèƒ½

2. **ä»£ç æ¸…ç†**
   - ç§»é™¤æœªä½¿ç”¨çš„å¯¼å…¥å’Œä¾èµ–
   - æ¸…ç†TypeScriptç±»å‹å®šä¹‰
   - æ›´æ–°æµ‹è¯•ç”¨ä¾‹

### ä¿®æ”¹åçš„æ¡†æ¶ä¼˜åŠ¿

1. **ä¿æŒæ ¸å¿ƒä»·å€¼** - å®Œæ•´çš„ç”¨æˆ·è®¤è¯ã€æ”¯ä»˜ã€ç§¯åˆ†ç³»ç»Ÿ
2. **é™ä½å¤æ‚åº¦** - ç§»é™¤ä¸šåŠ¡ç‰¹å®šä»£ç ï¼Œä¸“æ³¨æ¡†æ¶åŠŸèƒ½
3. **æé«˜å¤ç”¨æ€§** - æ¸…æ™°çš„æ¡†æ¶è¾¹ç•Œï¼Œä¾¿äºæ–°åŠŸèƒ½å¼€å‘
4. **å‡å°‘ç»´æŠ¤æˆæœ¬** - ç§»é™¤ä¸ç›¸å…³çš„ä¾èµ–å’Œä»£ç 

### é£é™©æ§åˆ¶

1. **æ•°æ®å¤‡ä»½** - åœ¨åˆ é™¤æ•°æ®åº“è¡¨å‰è¿›è¡Œå®Œæ•´å¤‡ä»½
2. **æ¸è¿›å¼åˆ é™¤** - å…ˆæ³¨é‡Šä»£ç ï¼Œç¡®è®¤æ— å½±å“åå†åˆ é™¤
3. **åŠŸèƒ½éªŒè¯** - æ¯ä¸ªé˜¶æ®µå®Œæˆåè¿›è¡Œå®Œæ•´çš„åŠŸèƒ½æµ‹è¯•
4. **å›æ»šå‡†å¤‡** - ä¿ç•™Gitå†å²ï¼Œç¡®ä¿å¯ä»¥å¿«é€Ÿå›æ»š

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-01-18
**è´Ÿè´£äºº**: äº§å“è®¾è®¡å›¢é˜Ÿ
